opForge Assembler v0.9.2
ADDR    BYTES                    LINE  SOURCE
------  -----------------------  ----  ------
----                                1  ; Simple Z80 CPU test
----                                2          .cpu z80
----                                3  
----                                4  ; Basic data movement
0000    3E 00                       5          ld a, 0         ; load immediate
0002    06 55                       6          ld b, 55h
0004    21 34 12                    7          ld hl, 1234h    ; 16-bit load immediate
0007    78                          8          ld a, b         ; register to register
0008    77                          9          ld (hl), a      ; store to memory via HL (z80 syntax)
0009    77                         10          ld m, a         ; store to memory via HL (8080 syntax)
----                               11  
----                               12  ; Arithmetic
000A    C6 05                      13          add a, 5        ; add immediate
000C    80                         14          add a, b        ; add register
000D    D6 10                      15          sub 10h         ; subtract immediate
000F    3C                         16          inc a
0010    05                         17          dec b
----                               18  
----                               19  ; Logic
0011    E6 0F                      20          and 0fh         ; mask lower nibble
0013    F6 80                      21          or 80h
0015    AF                         22          xor a           ; clear A (same as XOR A,A)
----                               23  
----                               24  ; Logic — 2-operand forms with indexed memory
0016    DD A6 03                   25          and a, (ix+3)   ; DD A6 03
0019    FD B6 01                   26          or a, (iy+1)    ; FD B6 01
001C    DD AE 00                   27          xor a, (ix+0)   ; DD AE 00
001F    FD BE FE                   28          cp a, (iy-2)    ; FD BE FE
----                               29  
----                               30  ; Logic — 2-operand forms with half-index registers (undocumented)
0022    DD A4                      31          and a, ixh      ; DD A4
0024    FD B5                      32          or a, iyl       ; FD B5
0026    FD AC                      33          xor a, iyh      ; FD AC
0028    DD BD                      34          cp a, ixl       ; DD BD
----                               35  
----                               36  ; Jumps
002A    C3 00 10                   37          jp 1000h        ; unconditional jump
002D    C2 00 20                   38          jp nz, 2000h    ; conditional jump
0030    18 02                      39          jr skip         ; relative jump
0032    30 00                      40          jr nc, skip     ; conditional relative
----                               41  skip
0034    00                         42          nop
----                               43  
----                               44  ; Z80-specific
0035    10 FD                      45          djnz skip       ; decrement B and jump if not zero
0037    ED B0                      46          ldir            ; block transfer
0039    ED B1                      47          cpir            ; block search
----                               48  
----                               49  ; CB-prefix bit/shift/rotate operations
003B    CB 58                      50          bit 3, b        ; CB 58
003D    CB EE                      51          set 5, (hl)     ; CB EE
003F    CB 8F                      52          res 1, a        ; CB 8F
0041    CB 01                      53          rlc c           ; CB 01
0043    CB 2E                      54          sra (hl)        ; CB 2E
0045    DD CB 05 56                55          bit 2, (ix+5)   ; DD CB 05 56
0049    FD CB FE FE                56          set 7, (iy-2)   ; FD CB FE FE
004D    DD CB 00 3E                57          srl (ix+0)      ; DD CB 00 3E
----                               58          
----                               59          .end

Lines: 59  Errors: 0  Warnings: 0

SYMBOL TABLE

skip            : 0034 (52)

Total memory is 81 bytes

GENERATED OUTPUT

ADDR    BYTES
------  -----------------------
0000    3E 00 06 55 21 34 12 78 77 77 C6 05 80 D6 10 3C
0010    05 E6 0F F6 80 AF DD A6 03 FD B6 01 DD AE 00 FD
0020    BE FE DD A4 FD B5 FD AC DD BD C3 00 10 C2 00 20
0030    18 02 30 00 00 10 FD ED B0 ED B1 CB 58 CB EE CB
0040    8F CB 01 CB 2E DD CB 05 56 FD CB FE FE DD CB 00
0050    3E
